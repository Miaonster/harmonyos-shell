!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("@hms-core/framework-base")):"function"==typeof define&&define.amd?define(["hms"],r):"object"==typeof exports?exports.account=r(require("@hms-core/framework-base")):e.account=r(e.hms)}(this,(e=>(()=>{"use strict";var r={393:r=>{r.exports=e}},o={};function t(e){var n=o[e];if(void 0!==n)return n.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,t),i.exports}t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{t.r(n),t.d(n,{AccountAuthManager:()=>H,AccountPageNavigator:()=>O,HuaweiIdAuthParamsHelper:()=>m});var e=t(393),r=function(e,r,o,t){return new(o||(o=Promise))((function(n,i){function s(e){try{c(t.next(e))}catch(e){i(e)}}function a(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};class o{constructor(){this.refCount=0,this.signIn=null,this.startAccountCenter=null}static asInterface(e){return new o.Proxy(e)}onTransact(r,t,n,i){return new Promise(((i,s)=>{try{switch(r){case o.CODE_signIn:for(var a="",c=t.readHeader();t.nextField()&&!t.isEndGroup();){var l=t.getFieldNumber();1===l?(a=t.readString(),console.log(`[HMSCore HIDL_Js] onTransact IAccountForegroundApi.CODE_signIn arg0 = ${a}.`)):(t.skipField(),console.log(`[HMSCore HIDL_Js] onTransact IAccountForegroundApi.CODE_signIn fieldNumber=${l}.`))}var d="hparcelable";return void this.callMethod(c,this.signIn,d,n,i,a);case o.CODE_startAccountCenter:return c=t.readHeader(),d="hparcelable",void this.callMethod(c,this.startAccountCenter,d,n,i);case o.CODE_addRef:return c=t.readHeader(),this.refCount++,n.writeHeader(),n.writeInt(1,this.refCount),void i(n);case o.CODE_release:return c=t.readHeader(),this.refCount--,n.writeHeader(),n.writeInt(1,this.refCount),void i(n);default:var u="[HMSCore HIDL_Js] IAccountForegroundApi ApiLevel is not match with the service's: there is no function for code = "+r;return console.error(u),void s(new e.HError(e.ErrorCode.API_LEVEL_NOT_SUPPORT,u))}}catch(e){e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountForegroundApi onTransact code = ${r}. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountForegroundApi onTransact code = ${r}. error: ${JSON.stringify(e)}`),s(e)}}))}doCallBack(e,r,o,t){o&&(e.writeHeader(),e.writeAny(1,o,t)),r(e)}callMethod(e,r,o,t,n,...i){if("function"==typeof r)if("function"==typeof n){if(e)var s=r(e,...i);else s=r(...i);s instanceof Promise?s.then((e=>{console.log("[HMSCore HIDL_Js] callMethod return Promise. asynReslut = "+e),this.doCallBack(t,n,e,o)})).catch((e=>{e instanceof Error?console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${e}`):console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${JSON.stringify(e)}`)})):this.doCallBack(t,n,s,o)}else console.log("[HMSCore HIDL_Js] callback is not a function. callback = "+n);else console.log("[HMSCore HIDL_Js] method is not a function. method = "+r)}}o.API_LEVEL=1,o.CODE_signIn=1,o.CODE_startAccountCenter=2,o.CODE_addRef=1048577,o.CODE_release=1048578,o.Proxy=class{constructor(e){this.mRemoteObj=e,this.isReleasing=!1}signIn(t){return r(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn."),this.isReleasing){var r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(r),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,r)}if(null==this.mRemoteObj)throw r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,r);var n=new e.HParcel,i=yield this.mRemoteObj.mAdapter.createHeader();n.writeHeader(i),n.writeString(1,t);var s=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,o.CODE_signIn,n);console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn result coming..."),s.readHeader();for(var a=null;s.nextField()&&!s.isEndGroup();){var c=s.getFieldNumber();1===c?(a=e.PageInfo.creatorFromHParcel(s),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn result= ${a}`)):(s.skipField(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn fieldNumber=${c}.`))}return a}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy signIn. error: ${JSON.stringify(e)}`),e}}))}startAccountCenter(){return r(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter."),this.isReleasing){var r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(r),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,r)}if(null==this.mRemoteObj)throw r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,r);var t=new e.HParcel,n=yield this.mRemoteObj.mAdapter.createHeader();t.writeHeader(n);var i=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,o.CODE_startAccountCenter,t);console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter result coming..."),i.readHeader();for(var s=null;i.nextField()&&!i.isEndGroup();){var a=i.getFieldNumber();1===a?(s=e.PageInfo.creatorFromHParcel(i),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter result= ${s}`)):(i.skipField(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter fieldNumber=${a}.`))}return s}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy startAccountCenter. error: ${JSON.stringify(e)}`),e}}))}addRef(){return r(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef."),this.isReleasing){var r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(r),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,r)}if(null==this.mRemoteObj)throw r="[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,r);var t=new e.HParcel,n=yield this.mRemoteObj.mAdapter.createHeader();t.writeHeader(n);var i=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,o.CODE_addRef,t);console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef result coming..."),i.readHeader();for(var s=0;i.nextField()&&!i.isEndGroup();){var a=i.getFieldNumber();1===a?(s=i.readInt(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef result= ${s}`)):(i.skipField(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef fieldNumber=${a}.`))}return s}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy addRef. error: ${JSON.stringify(e)}`),e}}))}release(){return r(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy release."),this.isReleasing=!0,null==this.mRemoteObj)throw new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,"[HMSCore HIDL_Js] IAccountForegroundApi Proxy release: mRemoteObj is not existed.");var r=new e.HParcel,t=yield this.mRemoteObj.mAdapter.createHeader();r.writeHeader(t);var n=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,o.CODE_release,r);console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy release result coming..."),n.readHeader();for(var i=0;n.nextField()&&!n.isEndGroup();){var s=n.getFieldNumber();1===s?(i=n.readInt(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy release result= ${i}`)):(n.skipField(),console.log(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy release fieldNumber=${s}.`))}return this.mRemoteObj=void 0,this.isReleasing=!1,console.log("[HMSCore HIDL_Js] IAccountForegroundApi Proxy release mRemoteObj is released."),i}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy release. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountForegroundApi Proxy release. error: ${JSON.stringify(e)}`),e}}))}};var i=function(e,r,o,t){return new(o||(o=Promise))((function(n,i){function s(e){try{c(t.next(e))}catch(e){i(e)}}function a(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};class s{constructor(){this.refCount=0,this.onResponse=null}static asInterface(e){return new s.Proxy(e)}onTransact(r,o,t,n){return new Promise(((n,i)=>{try{switch(r){case s.CODE_onResponse:var a="";for(o.readHeader();o.nextField()&&!o.isEndGroup();){var c=o.getFieldNumber();1===c?(a=o.readString(),console.log(`[HMSCore HIDL_Js] onTransact IAccountCallback.CODE_onResponse arg0 = ${a}.`)):(o.skipField(),console.log(`[HMSCore HIDL_Js] onTransact IAccountCallback.CODE_onResponse fieldNumber=${c}.`))}return void this.callMethod(void 0,this.onResponse,"void",t,n,a);case s.CODE_addRef:return o.readHeader(),this.refCount++,t.writeHeader(),t.writeInt(1,this.refCount),void n(t);case s.CODE_release:return o.readHeader(),this.refCount--,t.writeHeader(),t.writeInt(1,this.refCount),void n(t);default:var l="[HMSCore HIDL_Js] IAccountCallback ApiLevel is not match with the service's: there is no function for code = "+r;return console.error(l),void i(new e.HError(e.ErrorCode.API_LEVEL_NOT_SUPPORT,l))}}catch(e){e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountCallback onTransact code = ${r}. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountCallback onTransact code = ${r}. error: ${JSON.stringify(e)}`),i(e)}}))}doCallBack(e,r,o,t){o&&(e.writeHeader(),e.writeAny(1,o,t)),r(e)}callMethod(e,r,o,t,n,...i){if("function"==typeof r)if("function"==typeof n){if(e)var s=r(e,...i);else s=r(...i);s instanceof Promise?s.then((e=>{console.log("[HMSCore HIDL_Js] callMethod return Promise. asynReslut = "+e),this.doCallBack(t,n,e,o)})).catch((e=>{e instanceof Error?console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${e}`):console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${JSON.stringify(e)}`)})):this.doCallBack(t,n,s,o)}else console.log("[HMSCore HIDL_Js] callback is not a function. callback = "+n);else console.log("[HMSCore HIDL_Js] method is not a function. method = "+r)}}s.API_LEVEL=1,s.CODE_onResponse=1,s.CODE_addRef=1048577,s.CODE_release=1048578,s.Proxy=class{constructor(e){this.mRemoteObj=e,this.isReleasing=!1}onResponse(r){return i(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountCallback Proxy onResponse."),this.isReleasing){var o="[HMSCore HIDL_Js] IAccountCallback Proxy onResponse: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(o),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,o)}if(null==this.mRemoteObj)throw o="[HMSCore HIDL_Js] IAccountCallback Proxy onResponse: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,o);var t=new e.HParcel,n=yield this.mRemoteObj.mAdapter.createHeader();return t.writeHeader(n),t.writeString(1,r),yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,s.CODE_onResponse,t),void console.log("[HMSCore HIDL_Js] IAccountCallback Proxy onResponse result coming...")}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy onResponse. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy onResponse. error: ${JSON.stringify(e)}`),e}}))}addRef(){return i(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountCallback Proxy addRef."),this.isReleasing){var r="[HMSCore HIDL_Js] IAccountCallback Proxy addRef: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(r),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,r)}if(null==this.mRemoteObj)throw r="[HMSCore HIDL_Js] IAccountCallback Proxy addRef: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,r);var o=new e.HParcel,t=yield this.mRemoteObj.mAdapter.createHeader();o.writeHeader(t);var n=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,s.CODE_addRef,o);console.log("[HMSCore HIDL_Js] IAccountCallback Proxy addRef result coming..."),n.readHeader();for(var i=0;n.nextField()&&!n.isEndGroup();){var a=n.getFieldNumber();1===a?(i=n.readInt(),console.log(`[HMSCore HIDL_Js] IAccountCallback Proxy addRef result= ${i}`)):(n.skipField(),console.log(`[HMSCore HIDL_Js] IAccountCallback Proxy addRef fieldNumber=${a}.`))}return i}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy addRef. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy addRef. error: ${JSON.stringify(e)}`),e}}))}release(){return i(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountCallback Proxy release."),this.isReleasing=!0,null==this.mRemoteObj){throw new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,"[HMSCore HIDL_Js] IAccountCallback Proxy release: mRemoteObj is not existed.")}var r=new e.HParcel,o=yield this.mRemoteObj.mAdapter.createHeader();r.writeHeader(o);var t=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,s.CODE_release,r);console.log("[HMSCore HIDL_Js] IAccountCallback Proxy release result coming..."),t.readHeader();for(var n=0;t.nextField()&&!t.isEndGroup();){var i=t.getFieldNumber();1===i?(n=t.readInt(),console.log(`[HMSCore HIDL_Js] IAccountCallback Proxy release result= ${n}`)):(t.skipField(),console.log(`[HMSCore HIDL_Js] IAccountCallback Proxy release fieldNumber=${i}.`))}return this.mRemoteObj=void 0,this.isReleasing=!1,console.log("[HMSCore HIDL_Js] IAccountCallback Proxy release mRemoteObj is released."),n}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy release. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountCallback Proxy release. error: ${JSON.stringify(e)}`),e}}))}};var a=function(e,r,o,t){return new(o||(o=Promise))((function(n,i){function s(e){try{c(t.next(e))}catch(e){i(e)}}function a(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof o?r:new o((function(e){e(r)}))).then(s,a)}c((t=t.apply(e,r||[])).next())}))};class c{constructor(){this.refCount=0,this.silentSignIn=null,this.signOut=null,this.cancelAuthorization=null}static asInterface(e){return new c.Proxy(e)}onTransact(r,o,t,n){return new Promise(((n,i)=>{try{switch(r){case c.CODE_silentSignIn:for(var a="",l=null,d=o.readHeader();o.nextField()&&!o.isEndGroup();)switch(g=o.getFieldNumber()){case 1:a=o.readString(),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_silentSignIn arg0 = ${a}.`);break;case 2:l=s.asInterface(o.readHObject()),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_silentSignIn arg1 = ${l}.`);break;default:o.skipField(),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_silentSignIn fieldNumber=${g}.`)}var u="void";return void this.callMethod(d,this.silentSignIn,u,t,n,a,l);case c.CODE_signOut:for(a=null,d=o.readHeader();o.nextField()&&!o.isEndGroup();)1===(g=o.getFieldNumber())?(a=s.asInterface(o.readHObject()),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_signOut arg0 = ${a}.`)):(o.skipField(),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_signOut fieldNumber=${g}.`));return u="void",void this.callMethod(d,this.signOut,u,t,n,a);case c.CODE_cancelAuthorization:for(a=null,d=o.readHeader();o.nextField()&&!o.isEndGroup();){var g;1===(g=o.getFieldNumber())?(a=s.asInterface(o.readHObject()),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_cancelAuthorization arg0 = ${a}.`)):(o.skipField(),console.log(`[HMSCore HIDL_Js] onTransact IAccountBackgroundApi.CODE_cancelAuthorization fieldNumber=${g}.`))}return u="void",void this.callMethod(d,this.cancelAuthorization,u,t,n,a);case c.CODE_addRef:return d=o.readHeader(),this.refCount++,t.writeHeader(),t.writeInt(1,this.refCount),void n(t);case c.CODE_release:return d=o.readHeader(),this.refCount--,t.writeHeader(),t.writeInt(1,this.refCount),void n(t);default:var I="[HMSCore HIDL_Js] IAccountBackgroundApi ApiLevel is not match with the service's: there is no function for code = "+r;return console.error(I),void i(new e.HError(e.ErrorCode.API_LEVEL_NOT_SUPPORT,I))}}catch(e){e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi onTransact code = ${r}. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi onTransact code = ${r}. error: ${JSON.stringify(e)}`),i(e)}}))}doCallBack(e,r,o,t){o&&(e.writeHeader(),e.writeAny(1,o,t)),r(e)}callMethod(e,r,o,t,n,...i){if("function"==typeof r)if("function"==typeof n){if(e)var s=r(e,...i);else s=r(...i);s instanceof Promise?s.then((e=>{console.log("[HMSCore HIDL_Js] callMethod return Promise. asynReslut = "+e),this.doCallBack(t,n,e,o)})).catch((e=>{e instanceof Error?console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${e}`):console.error(`[HMSCore HIDL_Js] callMethod in Promise. error: ${JSON.stringify(e)}`)})):this.doCallBack(t,n,s,o)}else console.log("[HMSCore HIDL_Js] callback is not a function. callback = "+n);else console.log("[HMSCore HIDL_Js] method is not a function. method = "+r)}}c.API_LEVEL=1,c.CODE_silentSignIn=1,c.CODE_signOut=2,c.CODE_cancelAuthorization=3,c.CODE_addRef=1048577,c.CODE_release=1048578,c.Proxy=class{constructor(e){this.mRemoteObj=e,this.isReleasing=!1}silentSignIn(r,o){return a(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn."),this.isReleasing){var t="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(t),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,t)}if(null==this.mRemoteObj)throw t="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,t);var n=new e.HParcel,i=yield this.mRemoteObj.mAdapter.createHeader();n.writeHeader(i),n.writeString(1,r);var s=yield this.mRemoteObj.mAdapter.newStub(o);return console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn callbackStub.mId= ${s.mId}`),n.writeHObject(2,s),yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,c.CODE_silentSignIn,n),void console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn result coming...")}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy silentSignIn. error: ${JSON.stringify(e)}`),e}}))}signOut(r){return a(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut."),this.isReleasing){var o="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(o),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,o)}if(null==this.mRemoteObj)throw o="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,o);var t=new e.HParcel,n=yield this.mRemoteObj.mAdapter.createHeader();t.writeHeader(n);var i=yield this.mRemoteObj.mAdapter.newStub(r);return console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut callbackStub.mId= ${i.mId}`),t.writeHObject(1,i),yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,c.CODE_signOut,t),void console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut result coming...")}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy signOut. error: ${JSON.stringify(e)}`),e}}))}cancelAuthorization(r){return a(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization."),this.isReleasing){var o="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(o),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,o)}if(null==this.mRemoteObj)throw o="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,o);var t=new e.HParcel,n=yield this.mRemoteObj.mAdapter.createHeader();t.writeHeader(n);var i=yield this.mRemoteObj.mAdapter.newStub(r);return console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization callbackStub.mId= ${i.mId}`),t.writeHObject(1,i),yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,c.CODE_cancelAuthorization,t),void console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization result coming...")}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy cancelAuthorization. error: ${JSON.stringify(e)}`),e}}))}addRef(){return a(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef."),this.isReleasing){var r="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef: mRemoteObj is releasing, please wait to finish releasing. need to create service again.";throw console.error(r),new e.HError(e.ErrorCode.REMOTE_OBJECT_RELEASING,r)}if(null==this.mRemoteObj)throw r="[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef: mRemoteObj is not existed.",new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,r);var o=new e.HParcel,t=yield this.mRemoteObj.mAdapter.createHeader();o.writeHeader(t);var n=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,c.CODE_addRef,o);console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef result coming..."),n.readHeader();for(var i=0;n.nextField()&&!n.isEndGroup();){var s=n.getFieldNumber();1===s?(i=n.readInt(),console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef result= ${i}`)):(n.skipField(),console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef fieldNumber=${s}.`))}return i}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy addRef. error: ${JSON.stringify(e)}`),e}}))}release(){return a(this,void 0,void 0,(function*(){try{if(console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release."),this.isReleasing=!0,null==this.mRemoteObj){throw new e.HError(e.ErrorCode.REMOTE_OBJECT_NOT_EXIST,"[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release: mRemoteObj is not existed.")}var r=new e.HParcel,o=yield this.mRemoteObj.mAdapter.createHeader();r.writeHeader(o);var t=yield this.mRemoteObj.mAdapter.transact(this.mRemoteObj,c.CODE_release,r);console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release result coming..."),t.readHeader();for(var n=0;t.nextField()&&!t.isEndGroup();){var i=t.getFieldNumber();1===i?(n=t.readInt(),console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release result= ${n}`)):(t.skipField(),console.log(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release fieldNumber=${i}.`))}return this.mRemoteObj=void 0,this.isReleasing=!1,console.log("[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release mRemoteObj is released."),n}catch(e){throw e instanceof Error?console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release. error: ${e}`):console.error(`[HMSCore HIDL_Js] IAccountBackgroundApi Proxy release. error: ${JSON.stringify(e)}`),e}}))}};const l="AccountSDK ",d="%{public}s";class u{static info(...r){e.HLogger.info(l,d,r)}static debug(...r){e.HLogger.debug(l,d,r)}static error(...r){e.HLogger.error(l,d,r)}static security(...r){this.printSecurityLog&&e.HLogger.debug(l,d,r)}}u.printSecurityLog=!1;class g{}g.API_LEVEL=1,g.FG_PROG_ID="HMSCore.AccountFg",g.BG_PROG_ID="HMSCore.AccountBg",g.BACKGROUND_INTERFACE_ID="IAccountBackgroundApi",g.FOREGROUND_INTERFACE_ID="IAccountForegroundApi";class I{}I.ERR_NO_PAGE_RESULT_RETURN=2801;class H{static signIn(r){return u.info("signIn entry."),u.debug("signIn entry, inputPara= "+JSON.stringify(r)),new Promise(((t,n)=>{const i={huaweiIdSignInOptions:r};let s=(new Date).getTime();e.HServiceManager.hCreateInstance({progId:g.FG_PROG_ID,iId:g.FOREGROUND_INTERFACE_ID,apiLevel:g.API_LEVEL,success:r=>{u.info("signIn HServiceManager.hCreateInstance success, use Time= "+((new Date).getTime()-s)),s=(new Date).getTime(),o.asInterface(r).signIn(JSON.stringify(i)).then((r=>{u.info("signIn IAccountForegroundApi signIn success, use time="+((new Date).getTime()-s)),u.security("signIn IAccountForegroundApi signIn success = "+JSON.stringify(r)),s=(new Date).getTime(),e.HPageStarter.start(r).then((e=>{var r,o,i,a,c,l,d,g,H;if(u.info("signIn HPageStarter return, use time="+((new Date).getTime()-s)),!e||0!==e.resultCode){u.error("signIn error "+(null==e?void 0:e.resultCode));const r={errCode:I.ERR_NO_PAGE_RESULT_RETURN,errMsg:"No result is returned. Please try again or reinstall the version."};return n(r)}const m={errCode:null===(i=null===(o=null===(r=e.want)||void 0===r?void 0:r.parameters)||void 0===o?void 0:o.accountResult)||void 0===i?void 0:i.errCode,errMsg:null===(l=null===(c=null===(a=e.want)||void 0===a?void 0:a.parameters)||void 0===c?void 0:c.accountResult)||void 0===l?void 0:l.errMsg,data:null===(H=null===(g=null===(d=e.want)||void 0===d?void 0:d.parameters)||void 0===g?void 0:g.accountResult)||void 0===H?void 0:H.data};0==m.errCode?(u.security("signIn HPageStarter success = "+JSON.stringify(e)),t(m)):(u.error("signIn HPageStarter fail = "+JSON.stringify(e)),n(m))})).catch((e=>{u.error("signIn HPageStarter fail use time= "+((new Date).getTime()-s)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};n(r)}))})).catch((e=>{u.error("signIn IAccountForegroundApi failed, use time= "+((new Date).getTime()-s)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};n(r)}))},failed:e=>{u.error("signIn HServiceManager.hCreateInstance failed, use time= "+((new Date).getTime()-s)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};n(r)}})}))}static silentSignIn(r){return u.info("silentSignIn entry."),u.debug("silentSignIn entry, inputPara= "+JSON.stringify(r)),new Promise(((o,t)=>{let n=(new Date).getTime(),i=new s;i.onResponse=e=>{u.info("silentSign callback use time= "+((new Date).getTime()-n)),u.security("silentSignIn callback = "+e);let r=JSON.parse(e);const i={errCode:r.errCode,errMsg:r.errMsg,data:r.data};0==i.errCode?o(i):t(i)},e.HServiceManager.hCreateInstance({progId:g.BG_PROG_ID,iId:g.BACKGROUND_INTERFACE_ID,apiLevel:g.API_LEVEL,success:e=>{const o={huaweiIdSignInOptions:r};u.info("silentSignIn HServiceManager.hCreateInstance success, use time= "+((new Date).getTime()-n)),n=(new Date).getTime(),c.asInterface(e).silentSignIn(JSON.stringify(o),i)},failed:e=>{u.error("silentSignIn HServiceManager.hCreateInstance failed, useTime= "+((new Date).getTime()-n)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};t(r)}})}))}static cancelAuthorization(){return u.info("cancelAuthorization entry."),new Promise(((r,o)=>{let t=(new Date).getTime(),n=new s;n.onResponse=e=>{u.info("cancelAuthorization callback use time= "+((new Date).getTime()-t)),u.security("cancelAuthorization  callback = "+e);let n=JSON.parse(e);const i={errCode:n.errCode,errMsg:n.errMsg};0==i.errCode?r(i):o(i)},e.HServiceManager.hCreateInstance({progId:g.BG_PROG_ID,iId:g.BACKGROUND_INTERFACE_ID,apiLevel:g.API_LEVEL,success:e=>{u.info("cancelAuthorization HServiceManager.hCreateInstance success, use time= "+((new Date).getTime()-t)),t=(new Date).getTime(),c.asInterface(e).cancelAuthorization(n)},failed:e=>{u.error("cancelAuthorization HServiceManager.hCreateInstance failed,  use Time="+((new Date).getTime()-t)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};o(r)}})}))}}class m{constructor(e,r){this.scopes=new Set,this.permissions=new Set,e&&this.setId(),r&&this.setProfile()}setAuthorizationCode(){return this.permissions.add({permission:"https://www.huawei.com/auth/account/base.profile/serviceauthcode"}),this}setIdToken(){return this.permissions.add({permission:"idtoken"}),this}setUid(){return this.permissions.add(_),this}setProfile(){return this.scopes.add(h),this}setId(){return this.scopes.add(A),this}setEmail(){return this.scopes.add(C),this}setAgeRange(){return this.scopes.add(f),this}setScopes(e){for(var r of e)this.scopes.add(r);return this}build(){return{scopeArray:Array.from(this.scopes),permissionArray:Array.from(this.permissions)}}}const C={scopeUri:"email"},A={scopeUri:"openid"},h={scopeUri:"profile"},f={scopeUri:"https://www.huawei.com/auth/account/age.range"},_={permission:"uid"};class O{static startAccountCenter(){return u.info("startAccountCenter entry."),new Promise(((r,t)=>{let n=(new Date).getTime();e.HServiceManager.hCreateInstance({progId:g.FG_PROG_ID,iId:g.FOREGROUND_INTERFACE_ID,apiLevel:g.API_LEVEL,success:i=>{u.info("startAccountCenter HServiceManager.hCreateInstance success, use Time= "+((new Date).getTime()-n)),n=(new Date).getTime(),o.asInterface(i).startAccountCenter().then((o=>{u.info("startAccountCenter IAccountForegroundApi startAccountCenter success, use time="+((new Date).getTime()-n)),u.security("startAccountCenter IAccountForegroundApi startAccountCenter success = "+JSON.stringify(o)),n=(new Date).getTime(),e.HPageStarter.start(o).then((e=>{var o,i,s,a,c,l,d,g,H;if(u.info("startAccountCenter HPageStarter return, use time="+((new Date).getTime()-n)),!e||0!==e.resultCode){const e={errCode:I.ERR_NO_PAGE_RESULT_RETURN,errMsg:"No result is returned. Please try again or reinstall the version."};t(e)}const m={errCode:null===(s=null===(i=null===(o=e.want)||void 0===o?void 0:o.parameters)||void 0===i?void 0:i.accountResult)||void 0===s?void 0:s.errCode,errMsg:null===(l=null===(c=null===(a=e.want)||void 0===a?void 0:a.parameters)||void 0===c?void 0:c.accountResult)||void 0===l?void 0:l.errMsg,data:null===(H=null===(g=null===(d=e.want)||void 0===d?void 0:d.parameters)||void 0===g?void 0:g.accountResult)||void 0===H?void 0:H.data};0==m.errCode?(u.security("startAccountCenter HPageStarter success = "+JSON.stringify(e)),r(m)):(u.error("startAccountCenter HPageStarter fail = "+JSON.stringify(e)),t(m))})).catch((e=>{u.error("startAccountCenter HPageStarter fail use time= "+((new Date).getTime()-n)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};t(r)}))})).catch((e=>{u.error("startAccountCenter IAccountForegroundApi failed, use time= "+((new Date).getTime()-n)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};t(r)}))},failed:e=>{u.error("startAccountCenter HServiceManager.hCreateInstance failed, use time= "+((new Date).getTime()-n)+", error= "+JSON.stringify(e));const r={errCode:e.code,errMsg:e.message};t(r)}})}))}}})(),n})()));